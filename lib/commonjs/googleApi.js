"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var GOOGLE_URL='https://maps.google.com/maps/api/geocode/json';function geocodeRequest(url,headers){var res,json;return _regenerator.default.async(function geocodeRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(fetch(url,{headers:headers}));case 2:res=_context.sent;_context.next=5;return _regenerator.default.awrap(res.json());case 5:json=_context.sent;if(!(!json.results||json.status!=='OK')){_context.next=8;break;}throw new Error("Google Maps Error: ["+json.status+"] "+json.error_message);case 8:return _context.abrupt("return",json.results.map(format));case 9:case"end":return _context.stop();}}},null,null,null,Promise);}function format(raw){var geocodeObj={position:{},formattedAddress:raw.formatted_address||'',feature:null,streetNumber:null,streetName:null,postalCode:null,locality:null,country:null,countryCode:null,adminArea:null,subAdminArea:null,subLocality:null};if(raw.geometry&&raw.geometry.location){geocodeObj.position={lat:raw.geometry.location.lat,lng:raw.geometry.location.lng};}raw.address_components.forEach(function(component){if(component.types.indexOf('route')!==-1){geocodeObj.streetName=component.long_name;}else if(component.types.indexOf('street_number')!==-1){geocodeObj.streetNumber=component.long_name;}else if(component.types.indexOf('country')!==-1){geocodeObj.country=component.long_name;geocodeObj.countryCode=component.short_name;}else if(component.types.indexOf('locality')!==-1){geocodeObj.locality=component.long_name;}else if(component.types.indexOf('postal_code')!==-1){geocodeObj.postalCode=component.long_name;}else if(component.types.indexOf('administrative_area_level_1')!==-1){geocodeObj.adminArea=component.long_name;}else if(component.types.indexOf('administrative_area_level_2')!==-1){geocodeObj.subAdminArea=component.long_name;}else if(component.types.indexOf('sublocality')!==-1||component.types.indexOf('sublocality_level_1')!==-1){geocodeObj.subLocality=component.long_name;}else if(component.types.indexOf('point_of_interest')!==-1||component.types.indexOf('colloquial_area')!==-1){geocodeObj.feature=component.long_name;}});return geocodeObj;}var _default={geocodePosition:function geocodePosition(apiKey,position,language,headers){return geocodeRequest(GOOGLE_URL+"?key="+apiKey+"&latlng="+position.lat+","+position.lng+"&language="+language,headers);},geocodeAddress:function geocodeAddress(apiKey,address,language,headers){return geocodeRequest(GOOGLE_URL+"?key="+apiKey+"&address="+encodeURI(address)+"&language="+language,headers);},geocodeAddressWithBounds:function geocodeAddressWithBounds(apiKey,address,bounds,language,headers){var sw=bounds.sw,ne=bounds.ne;return geocodeRequest(GOOGLE_URL+"?key="+apiKey+"&address="+encodeURI(address)+("&bounds="+sw.lat+","+sw.lng+"|"+ne.lat+","+ne.lng+"&language="+language),headers);}};exports.default=_default;
//# sourceMappingURL=googleApi.js.map